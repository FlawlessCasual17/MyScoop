{
    "version": "9.1.0",
    "description": "A free file archiver utility, based on Open Source technologies",
    "homepage": "https://www.peazip.org",
    "license": "LGPL-3.0-only",
    "architecture": {
        "64bit": {
            "url": "https://dotsrc.dl.osdn.net/osdn/peazip/78346/peazip-9.1.0.WIN64.exe#/setup.exe",
            "hash": "4a7d3fe5366c60bf35e8ab6e5010d9c033d157d728801aff1a8d67a4c42afccf"
        },
        "32bit": {
            "url": "https://dotsrc.dl.osdn.net/osdn/peazip/78346/peazip-9.1.0.WINDOWS.exe#/setup.exe",
            "hash": "4535722b3d475a841b835e6097e10f9786a95ab1ce10329e6b676f587a43f230"
        }
    },
    "post_install": [
        "ensure $persist_dir | Out-Null",
        "if (!(is_admin)) { error \"$app requires admin rights to $cmd\"; break }",
        "Start-Process \"$dir\\setup.exe\" -Wait -Verb 'RunAs' -Args @('/VERYSILENT', \"/DIR=$dir\", '/CURRENTUSER', '/SUPPRESSMSGBOXES')",
        "$peazip_shortcuts_path = \"$env:ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\PeaZip\"",
        "Remove-Item \"$dir\\setup.exe\"",
        "Remove-Item $peazip_shortcuts_path -Include 'Extract here (smart new folder).lnk', 'Uninstall PeaZip.lnk' -Force",
        "if (Get-ChildItem \"$persist_dir\\PeaZip-Config\\unins001.*\" -ErrorAction 'SilentlyContinue' | Test-Path) {",
        "   Get-ChildItem \"$persist_dir\\PeaZip-Config\\unins001.*\" | Copy-Item -ErrorAction 'SilentlyContinue' -Destination \"$dir\\PeaZip-Config\"",
        "}",
        "else {",
        "   Start-Process \"$dir\\res\\bin\\Configure PeaZip.exe\" -Wait -Verb 'RunAs' -Args @('/VERYSILENT', \"/DIR=$dir\", '/CURRENTUSER', '/SUPPRESSMSGBOXES')",
        "}"
    ],
    "pre_uninstall": [
        "if ($cmd -eq 'uninstall') {",
        "   if (!(is_admin)) { error \"$app requires admin rights to $cmd\"; break }",
        "   foreach ($uninstall_exe in \"$dir\\unins001.exe\", \"$dir\\unins000.exe\") {",
        "       Start-Process $uninstall_exe -Wait -Verb 'RunAs' -ArgumentList @('/VERYSILENT', '/FORCECLOSEAPPLICATIONS', '/SUPPRESSMSGBOXES')",
        "   }",
        "}",
        "else {",
        "   Get-ChildItem \"$dir\\unins001.*\" | Copy-Item -ErrorAction 'SilentlyContinue' -Destination \"$persist_dir\\PeaZip-Config\"",
        "   Start-Process \"$dir\\unins000.exe\" -Wait -Verb 'RunAs' -ArgumentList @('/VERYSILENT', '/FORCECLOSEAPPLICATIONS', '/SUPPRESSMSGBOXES')",
        "}"
    ],
    "checkver": {
        "url": "https://osdn.net/projects/peazip/",
        "regex": "<a href=\"/projects/peazip/releases/(?<release>[\\d]*)\">peazip ([\\d.]+)</a>"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://dotsrc.dl.osdn.net/osdn/peazip/$matchRelease/peazip-$version.WIN64.exe#/setup.exe"
            },
            "32bit": {
                "url": "https://dotsrc.dl.osdn.net/osdn/peazip/$matchRelease/peazip-$version.WINDOWS.exe#/setup.exe"
            }
        },
        "hash": {
            "url": "https://osdn.net/projects/peazip/downloads/$matchRelease/$basename",
            "regex": "(?sm)SHA256.*?$sha256"
        }
    }
}
