{
    "version": "9.4.0",
    "description": "A free file archiver utility, based on Open Source technologies",
    "homepage": "https://peazip.github.io/",
    "license": "LGPL-3.0-only",
    "architecture": {
        "64bit": {
            "url": "https://github.com/peazip/PeaZip/releases/download/9.4.0/peazip-9.4.0.WIN64.exe#/setup.exe",
            "hash": "md5:07b4038a4dfd9ce5d6f45e3b8ae8be0d"
        },
        "32bit": {
            "url": "https://github.com/peazip/PeaZip/releases/download/9.4.0/peazip-9.4.0.WINDOWS.exe#/setup.exe",
            "hash": "md5:b443a3086116ee890745ccfe19a58015"
        }
    },
    "persist": "PeaZip",
    "post_install": [
        "if (!(is_admin)) { error \"$app requires admin rights to $cmd\"; break }",
        "$setupArgs = @('/VERYSILENT', \"/DIR=$persist_dir\\PeaZip\", '/CURRENTUSER', '/SUPPRESSMSGBOXES'); ",
        "if ($cmd -eq 'install') { Start-Process \"$dir\\setup.exe\" -Wait -Verb 'RunAs' -Args $setupArgs; Remove-Item \"$dir\\setup.exe\" }",
        "New-Item \"$dir\\configure-peazip.exe\" -ItemType 'SymbolicLink' -Target \"$persist_dir\\PeaZip\\res\\bin\\Configure PeaZip.exe\" | Out-Null",
        "foreach ($f in @(Get-ChildItem \"$persist_dir\\PeaZip\\*.exe\" -Exclude 'unins*.*')) {",
        "    $name = $f.Name; New-Item \"$dir\\$name\" -ItemType 'SymbolicLink' -Target $f.FullName | Out-Null",
        "}",
        "if ($cmd -eq 'install') { Start-Process \"$persist_dir\\PeaZip\\res\\bin\\Configure PeaZip.exe\" -Wait -Verb 'RunAs' -Args $setupArgs; Start-Sleep -Seconds 2 }"
    ],
    "env_add_path": ".",
    "pre_uninstall": [
        "if (!(is_admin)) { error \"$app requires admin rights to $cmd\"; break }",
        "if ($cmd -eq 'uninstall') {",
        "    foreach ($uninstall_exe in (Get-ChildItem \"$persist_dir\\PeaZip\\unins*.exe\").FullName) {",
        "        Start-Process $uninstall_exe -Wait -Verb 'RunAs' -ArgumentList @('/VERYSILENT', '/FORCECLOSEAPPLICATIONS', '/SUPPRESSMSGBOXES')",
        "    }",
        "}"
    ],
    "checkver": {
        "github": "https://github.com/peazip/PeaZip"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/peazip/PeaZip/releases/download/$version/peazip-$version.WIN64.exe#/setup.exe"
            },
            "32bit": {
                "url": "https://github.com/peazip/PeaZip/releases/download/$version/peazip-$version.WINDOWS.exe#/setup.exe"
            }
        },
        "hash": {
            "url": "https://sourceforge.net/projects/peazip/rss?path=/",
            "regex": "$basename/download\".*?\"md5\"\\>$md5"
        }
    }
}
