{
    "version": "0.3.6",
    "homepage": "https://harmonoid.com/",
    "description": "Plays & manages your music library. Looks beautiful & juicy. Playlists, visuals, synced lyrics, pitch shift, volume boost & more.",
    "license": {
        "identifier": "Freeware",
        "url": "https://raw.githubusercontent.com/harmonoid/harmonoid/master/EULA.txt"
    },
    "notes": [
        "To install harmonoid file associations, run:",
        "install-harmonoid-associations.ps1",
        "To install the harmonoid context menu, run:",
        "install-harmonoid-context.ps1",
        "",
        "To uninstall harmonoid file associations, run:",
        "uninstall-harmonoid-associations.ps1",
        "To uninstall the harmonoid context menu, run:",
        "uninstall-harmonoid-context.ps1"
    ],
    "architecture": {
        "64bit": {
            "url": "https://github.com/alexmercerind2/harmonoid-releases/releases/download/v0.3.6/harmonoid-windows-exe.zip",
            "hash": "b2e169b1fc337e2214c9181db2f7035d8555af347acd9fbbbb96a4bbf564da1b"
        }
    },
    "extract_dir": "harmonoid-windows-exe",
    "pre_install": [
        "$newDir = $dir.Replace($version, 'current')",
        "",
        "$install_harmonoid_associations = @\"",
        "`$formats = @(",
        "    'ogg',",
        "    'oga',",
        "    'ogx',",
        "    'aac',",
        "    'm4a',",
        "    'mp3',",
        "    'wma',",
        "    'wav',",
        "    'flac',",
        "    'opus',",
        "    'aiff',",
        "    'ac3',",
        "    'adt',",
        "    'adts',",
        "    'amr',",
        "    'ec3',",
        "    'm3u',",
        "    'm4r',",
        "    'wpl',",
        "    'zpl'",
        ")",
        "",
        "New-Item 'HKCU:\\Software\\Harmonoid\\Harmonoid\\Capability\\FileAssociations' -Force | Out-Null",
        "New-Item 'HKCU:\\SOFTWARE\\Classes\\Applications\\harmonoid.exe\\SupportedTypes' -Force | Out-Null",
        "New-ItemProperty 'HKCU:\\Software\\Harmonoid\\Harmonoid\\Capability' -Name 'ApplicationDescription' -Value 'Plays & manages your music library. Looks beautiful & juicy.' -Force | Out-Null",
        "New-ItemProperty 'HKCU:\\Software\\Harmonoid\\Harmonoid\\Capability' -Name 'ApplicationName' -Value 'Harmonoid' -Force | Out-Null",
        "",
        "`$formats | ForEach-Object {",
        "    New-ItemProperty 'HKCU:\\Software\\Harmonoid\\Harmonoid\\Capability\\FileAssociations' -Name \".`$_\" -Value \"Harmonoid.`$_\" -PropertyType 'String' -Force | Out-Null",
        "    New-Item \"HKCU:\\SOFTWARE\\Classes\\Harmonoid.`$_\\shell\\open\\command\" -Value \"$newDir\\harmonoid.exe %1\" -Force | Out-Null",
        "    New-Item \"HKCU:\\SOFTWARE\\Classes\\Harmonoid.`$_\\DefaultIcon\" -Value \"$newDir\\harmonoid.exe,0\" -Force | Out-Null",
        "    New-Item \"HKCU:\\SOFTWARE\\Classes\\Harmonoid.`$_\" -Value \"$(($_).ToUpper()) FILE\" -Force | Out-Null",
        "    New-ItemProperty 'HKCU:\\SOFTWARE\\Classes\\Applications\\harmonoid.exe\\SupportedTypes' -Name \".`$_\" -Value '' -PropertyType 'String' -Force | Out-Null",
        "    New-ItemProperty \"HKCU:\\SOFTWARE\\Classes\\.`$_\\OpenWithProgids\" -Name \"Harmonoid.`$_\" -Value '' -PropertyType 'String' -Force | Out-Null",
        "}",
        "\"@",
        "",
        "$uninstall_harmonoid_associations = @\"",
        "`$formats = @(",
        "    'ogg',",
        "    'oga',",
        "    'ogx',",
        "    'aac',",
        "    'm4a',",
        "    'mp3',",
        "    'wma',",
        "    'wav',",
        "    'flac',",
        "    'opus',",
        "    'aiff',",
        "    'ac3',",
        "    'adt',",
        "    'adts',",
        "    'amr',",
        "    'ec3',",
        "    'm3u',",
        "    'm4r',",
        "    'wpl',",
        "    'zpl'",
        ")",
        "",
        "Remove-Item 'HKCU:\\SOFTWARE\\Classes\\Applications\\harmonoid.exe' -Recurse -Force",
        "Remove-Item 'HKCU:\\Software\\Harmonoid\\Harmonoid' -Recurse -Force",
        "",
        "`$formats | ForEach-Object {",
        "    Remove-Item \"HKCU:\\SOFTWARE\\Classes\\Harmonoid.`$_\" -Recurse -Force",
        "    Remove-ItemProperty \"HKCU:\\SOFTWARE\\Classes\\.`$_\\OpenWithProgids\" -Name \"Harmonoid.`$_\" -Force",
        "}",
        "\"@",
        "",
        "$install_harmonoid_context = @\"",
        "New-Item 'HKCU:\\Software\\Classes\\Directory\\shell\\HarmonoidAddToPlaylist\\command' -Value \"$newDir\\harmonoid.exe  %1\" -Force | Out-Null",
        "New-Item 'HKCU:\\Software\\Classes\\Directory\\shell\\HarmonoidAddToPlaylist' -Value 'Add to Harmonoid''s Playlist' -Force | Out-Null",
        "New-ItemProperty 'HKCU:\\Software\\Classes\\Directory\\shell\\HarmonoidAddToPlaylist' -Name 'Icon' -Value \"$newDir\\harmonoid.exe,0\" -PropertyType 'String' -Force | Out-Null",
        "\"@",
        "",
        "Set-Content \"$dir\\install-harmonoid-associations.ps1\" $install_harmonoid_associations -Encoding 'utf8' -Force",
        "Set-Content \"$dir\\uninstall-harmonoid-associations.ps1\" $uninstall_harmonoid_associations -Encoding 'utf8' -Force",
        "Set-Content \"$dir\\install-harmonoid-context.ps1\" $install_harmonoid_context -Encoding 'utf8' -Force",
        "Set-Content \"$dir\\uninstall-harmonoid-context.ps1\" 'Remove-Item ''HKCU:\\Software\\Classes\\Directory\\shell\\HarmonoidAddToPlaylist'' -Recurse -Force' -Encoding 'utf8' -Force"
    ],
    "bin": [
        "harmonoid.exe",
        "install-harmonoid-associations.ps1",
        "uninstall-harmonoid-associations.ps1",
        "install-harmonoid-context.ps1",
        "uninstall-harmonoid-context.ps1"
    ],
    "shortcuts": [
        [
            "harmonoid.exe",
            "Harmonoid"
        ]
    ],
    "pre_uninstall": [
        "if ($cmd -eq 'uninstall') {",
        "   Remove-Item 'HKCU:\\Software\\Classes\\Directory\\shell\\HarmonoidAddToPlaylist' -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "",
        "   $formats = @(",
        "       'ogg',",
        "       'oga',",
        "       'ogx',",
        "       'aac',",
        "       'm4a',",
        "       'mp3',",
        "       'wma',",
        "       'wav',",
        "       'flac',",
        "       'opus',",
        "       'aiff',",
        "       'ac3',",
        "       'adt',",
        "       'adts',",
        "       'amr',",
        "       'ec3',",
        "       'm3u',",
        "       'm4r',",
        "       'wpl',",
        "       'zpl'",
        "   )",
        "",
        "   Remove-Item 'HKCU:\\SOFTWARE\\Classes\\Applications\\harmonoid.exe' -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "   Remove-Item 'HKCU:\\Software\\Harmonoid\\Harmonoid' -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "",
        "   $formats | ForEach-Object {",
        "       Remove-Item \"HKCU:\\SOFTWARE\\Classes\\Harmonoid.$_\" -ErrorAction 'SilentlyContinue' -Recurse -Force",
        "       Remove-ItemProperty \"HKCU:\\SOFTWARE\\Classes\\.$_\\OpenWithProgids\" -ErrorAction 'SilentlyContinue' -Name \"Harmonoid.$_\" -Force",
        "   }",
        "}"
    ],
    "checkver": {
        "github": "https://github.com/alexmercerind2/harmonoid-releases"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://github.com/alexmercerind2/harmonoid-releases/releases/download/v$version/harmonoid-windows-exe.zip"
            }
        }
    }
}
